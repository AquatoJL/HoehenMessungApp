<Crosshair@MDWidget>:
    disabled: True
    size_hint: None, None
    size: dp(60), dp(60)
    pos_hint: {"center_x": 0.5, "center_y": 0.5}

    canvas:
        Color:
            rgba: 1,1,1,1
        Line:
            width: 2
            points: root.center_x - root.width / 2, root.center_y, root.center_x + root.width / 2, root.center_y
        Line:
            width: 2
            points: root.center_x, root.center_y - root.height / 2, root.center_x, root.center_y + root.height / 2

        Color:
            rgba: 0,0,0,1
        Line:
            width: 1
            points: root.center_x - root.width / 2, root.center_y, root.center_x + root.width / 2, root.center_y
        Line:
            width: 1
            points: root.center_x, root.center_y - root.height / 2, root.center_x, root.center_y + root.height / 2

<OwnIcon@MDIcon>:
    theme_icon_color: "Custom"
    color: 1, 1, 1, 1
    valign: "middle"
    halign: "center"
    text_size: self.size

<OwnLabel@MDLabel>
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    halign: "center"
    valign: "middle"
    text_size: self.size

<MeasureLabel@MDLabel>
    font_size: '40sp'
    theme_text_color: "Custom"
    text_color: 1, 1, 1, 1
    halign: "center"
    valign: "middle"

<OwnBox@MDBoxLayout>
    orientation: 'horizontal'
    size_hint_y: None
    height: dp(30)
    spacing: dp(8)
    valign: "middle"
    halign: "center"

<CameraScreen>:
    orientation: 'horizontal'
    
    FloatLayout:
        size_hint_x: 0.75
        
        Preview:
            id: preview
            letterbox_color: 0, 0, 0, 1
        
        Crosshair:
        
        GridLayout:
            cols: 2
            rows: 2
            size_hint: None, None
            height: dp(90)
            width: dp(250)
            spacing: dp(24)
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            row_force_default: True
            row_default_height: dp(24)

            canvas.before:
                Color:
                    rgba: 0.4, 0.4, 0.4, 0.3
                RoundedRectangle:
                    pos: self.pos[0], self.pos[1] + dp(5)
                    size: self.size[0] + dp(15), self.size[1]
                    radius: [12]

            OwnLabel:
                text: "Neigung"            

            OwnLabel:
                text: "Wasserwaage"

            MeasureLabel:
                text: str(round(root.tilt_angle, 1))

            MeasureLabel:

                canvas.before:
                    Color:
                        rgba: 0, 0.5, 0, 1
                    Rectangle:
                        pos: self.pos
                        size: self.size
                    
                    Color:
                        rgba: 0, 0, 0, 1
                    Line:
                        width: 1
                        points: [self.center_x-dp(20), self.y, self.center_x-dp(20), self.top]
                    Line:
                        width: 1
                        points: [self.center_x+dp(20), self.y, self.center_x+dp(20), self.top]
                
                canvas:
                    Color:
                        rgba: 0.3, 1, 0.3, 0.5
                    Ellipse:
                        pos: self.center_x + -root.roll_angle * dp(0.57) - dp(8), self.center_y - dp(8)
                        size: dp(16), dp(16)
    
    MDBoxLayout:
        orientation: 'vertical'
        size_hint_x: 0.25
        padding: dp(10)
        spacing: dp(10)
        
        canvas.before:
            Color:
                rgba: 0.2, 0.2, 0.2, 1
            Rectangle:
                pos: self.pos
                size: self.size

        Widget:

        OwnBox:            
            canvas.before:
                Color:
                    rgba: 0.4, 0.4, 0.4, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnLabel:
                text: "Telefonhöhe"

        OwnBox:            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-up-down"
            
            TextInput:
                id: phone_height_input
                text: str(root.phone_height)
                input_filter: 'float'
                font_size: '15sp'
                multiline: False
                on_text_validate: root.phone_height = float(self.text)
                foreground_color: 1, 1, 1, 1
                background_color: 0.4, 0.4, 0.4, 1
                halign: "center"
                valign: "bottom"
                text_size: self.size
            
            OwnLabel:
                text: "m"
        
        OwnBox:            
            canvas.before:
                Color:
                    rgba: 0.4, 0.4, 0.4, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnLabel:
                text: "Entfernung"

        OwnBox:            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-left-right"
                size_hint_x: 0.5
            
            OwnLabel:
                text: root.distance

        OwnBox:                
            canvas.before:
                Color:
                    rgba: 0.4, 0.4, 0.4, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnLabel:
                text: "Höhe"
        
        OwnBox:            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-up-down"
                size_hint_x: 0.3
            
            OwnLabel:
                text: root.object_height

        MDFillRoundFlatIconButton:
            text: root.button_text
            icon: root.icon
            size_hint_y: None
            size_hint_x: 1
            font_size: '16sp'
            padding: dp(10), dp(5)
            md_bg_color: 0.7, 0, 0, 1
            on_press: app.measure()

        Widget:
