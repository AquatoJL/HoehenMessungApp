<Crosshair@MDWidget>:
    disabled: True
    size_hint: None, None
    size: dp(60), dp(60)
    pos_hint: {"center_x": 0.5, "center_y": 0.5}

    canvas:
        Color:
            rgba: 1,1,1,1
        Line:
            width: 2
            points: root.center_x - root.width / 2, root.center_y, root.center_x + root.width / 2, root.center_y
        Line:
            width: 2
            points: root.center_x, root.center_y - root.height / 2, root.center_x, root.center_y + root.height / 2

        Color:
            rgba: 0,0,0,1
        Line:
            width: 1
            points: root.center_x - root.width / 2, root.center_y, root.center_x + root.width / 2, root.center_y
        Line:
            width: 1
            points: root.center_x, root.center_y - root.height / 2, root.center_x, root.center_y + root.height / 2

<OwnIcon@MDIcon>:
    theme_icon_color: "Custom"
    icon_color: 1, 1, 1, 1    
    font_size: '35sp'
    valign: "middle"
    halign: "center"

<MeasureLabel@Label>
    font_size: '40sp'

<CameraScreen>:
    orientation: 'horizontal'
    
    # LINKE SEITE: Kamera (70% der Breite)
    FloatLayout:
        size_hint_x: 0.7
        
        Preview:
            id: preview
            letterbox_color: 0, 0, 0, 1
        
        Crosshair:
        
        GridLayout:
            cols: 2
            rows: 2
            size_hint: None, None
            height: dp(90)
            width: dp(250)
            spacing: dp(24)
            pos_hint: {"center_x": 0.5, "center_y": 0.2}
            row_force_default: True
            row_default_height: dp(24)

            canvas.before:
                Color:
                    rgba: 0.459, 0.459, 0.459, 0.271
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [12]

            Label:
                text: "Pitch"            

            Label:
                text: "Roll"

            MeasureLabel:
                text: str(root.pitch_angle)

            MeasureLabel:
                text: str(root.roll_angle)


        GridLayout:
            rows: 6
            size_hint: None, None
            height: dp(150)
            width: dp(200)
            spacing: dp(4)
            pos_hint: {"x": 0.02, "top": 0.98}
            row_force_default: True
            row_default_height: dp(24)

            canvas.before:
                Color:
                    rgba: 0, 0, 0, 0.6
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]

            Label:
                text: root.accelX
                font_size: '16sp'
                color: 1, 1, 1, 1

            Label:
                text: root.accelY
                font_size: '16sp'
                color: 1, 1, 1, 1

            Label:
                text: root.accelZ
                font_size: '16sp'
                color: 1, 1, 1, 1
    
    # RECHTE SEITE
    BoxLayout:
        orientation: 'vertical'
        size_hint_x: 0.3
        padding: dp(10)
        spacing: dp(10)
        pos_hint: {"center_x": 0.8, "center_y": 0.5}
        
        canvas.before:
            Color:
                rgba: 0.2, 0.2, 0.2, 1
            Rectangle:
                pos: self.pos
                size: self.size
        
        Widget:
            size_hint_y: 0.15

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            Label:
                text: "Telefonhöhe"
                font_size: '20sp'
                color: 1, 1, 1, 1

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-up-down"
                size_hint_x: 0.25
            
            TextInput:
                id: phone_height_input
                text: "1.50"
                input_filter: 'float'
                font_size: '20sp'
                multiline: False
                on_text_validate: root.phone_height = float(self.text)
                foreground_color: 1, 1, 1, 1
                background_color: 0.4, 0.4, 0.4, 1
            
            Label:
                text: "m"
                size_hint_x: 0.2
                font_size: '20sp'
                color: 1, 1, 1, 1
        
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            Label:
                text: "Entfernung"
                font_size: '20sp'
                color: 1, 1, 1, 1

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-left-right"
                size_hint_x: 0.3
            
            Label:
                text: root.distance
                font_size: '20sp'
                size_hint_x: 0.7
                color: 1, 1, 1, 1

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            Label:
                text: "Höhe"
                font_size: '20sp'
                color: 1, 1, 1, 1
        
        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(8)
            
            canvas.before:
                Color:
                    rgba: 0.3, 0.3, 0.3, 1
                RoundedRectangle:
                    pos: self.pos
                    size: self.size
                    radius: [8]
            
            OwnIcon:
                icon: "arrow-up-down"
                size_hint_x: 0.3
            
            Label:
                text: root.object_height
                font_size: '20sp'
                size_hint_x: 0.7
                color: 1, 1, 1, 1
        
        # Button unten
        Button:
            text: root.button_text
            size_hint_y: None
            height: dp(60)
            background_color: 1, 0, 0, 1
            font_size: '18sp'
            bold: True
            on_press: app.measure()

        Widget:
            size_hint_y: 0.15